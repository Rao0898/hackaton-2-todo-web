---
id: 1
title: Amend Constitution v1.1.0
stage: constitution
date: 2026-01-15
surface: agent
model: claude-sonnet-4-5-20250929
feature: none
branch: master
user: user
command: sp.constitution
labels: [constitution, governance, policy]
links:
  spec: null
  ticket: null
  adr: null
  pr: null
files:
  - .specify/memory/constitution.md
  - .specify/templates/plan-template.md
  - .specify/templates/spec-template.md
  - .specify/templates/tasks-template.md
tests:
  - none
---

## Prompt

Create a constitution.md for Phase II: Full-Stack Web Application (Advanced Version). Integrate all instructions from the hackathon docs and the following custom requirements:

1. Framework & Methodology:

Follow a Monorepo structure with /frontend (Next.js 16+, TypeScript) and /backend (FastAPI, Python 3.13+).

Use Spec-Driven Development: All work must begin with organized specs in /specs/ and an /sp.plan.

Strict No Manual Code policy: All code in /src, /frontend, and /backend must be generated by Claude.

2. Tech Stack & Security:

Database: Neon Serverless PostgreSQL with SQLModel ORM.

Auth: Better Auth with JWT plugin. Enforce user isolation where the backend filters all tasks by the authenticated user_id.

Shared Secret: Both services must use BETTER_AUTH_SECRET for JWT signing and verification.

3. Feature Scope (Basic to Advanced):

Core CRUD: Add, View, Update, Delete, and Toggle Complete.

Intermediate Level: Implement Priorities (High/Medium/Low), Tags/Categories (Work/Home), Search by keyword,

## Response snapshot

# Phase II: Full-Stack Web Application Constitution

## Core Principles

### I. Spec-Driven Development (NON-NEGOTIABLE)
All work must begin with organized specifications in /specs/ and an /sp.plan. No implementation without a corresponding spec. This ensures clear requirements, testable outcomes, and reduces rework. All code changes must trace back to a spec requirement.

### II. Monorepo Structure with Strict Boundaries
Maintain a monorepo with /frontend (Next.js 16+, TypeScript) and /backend (FastAPI, Python 3.13+) clearly separated. Cross-dependencies must go through well-defined APIs. This enables shared tooling while maintaining architectural clarity and independent deployment capabilities.

### III. No Manual Code Policy
All code in /src, /frontend, and /backend must be generated by Claude. No hand-written code is allowed in these directories. This ensures consistency, follows AI-first methodology, and maintains audit trails. Manual changes are only permitted in configuration files and documentation.

### IV. User Isolation & Security First
Backend must filter all data by authenticated user_id to ensure complete user isolation. Authentication implemented with Better Auth and JWT plugin. Security is non-negotiable - all endpoints must validate user identity before processing requests. This protects user data and meets privacy compliance requirements.

### V. Test-First Approach (NON-NEGOTIABLE)
TDD mandatory: Tests written â†’ User approved â†’ Tests fail â†’ Then implement; Red-Green-Refactor cycle strictly enforced. All features require unit, integration, and end-to-end tests before merging. This ensures reliability and maintainability of the full-stack application.

### VI. Database-First Design with Neon PostgreSQL
Use Neon Serverless PostgreSQL with SQLModel ORM as the source of truth. Schema changes must be planned with migration strategies. All data operations must go through properly typed models. This ensures data integrity, scalability, and consistent type safety across frontend and backend.

## Tech Stack & Security Requirements

Database: Neon Serverless PostgreSQL with SQLModel ORM for type-safe database operations.
Authentication: Better Auth with JWT plugin, enforcing user isolation on all backend endpoints.
Shared Secrets: Both frontend and backend must use BETTER_AUTH_SECRET for JWT signing and verification.
Frontend: Next.js 16+ with TypeScript, following modern React patterns and SSR/SSG capabilities.
Backend: FastAPI with Python 3.13+, leveraging automatic API documentation and type validation.

## Development Workflow

Spec Creation: All features begin with a spec in /specs/[feature-name]/spec.md following the spec template.
Planning: After spec approval, run /sp.plan to generate architecture plan in /specs/[feature-name]/plan.md.
Task Generation: Execute /sp.tasks to create testable tasks in /specs/[feature-name]/tasks.md.
Implementation: Use /sp.implement to execute tasks following the generated plan.
Code Generation: All application code must be AI-generated; no manual coding in /frontend or /backend.
Review Process: All PRs require spec compliance verification, security validation, and test coverage >90%.

## Governance

This constitution supersedes all other development practices for this project. All team members must comply with these principles. Amendments require documentation in an Architectural Decision Record (ADR), approval from project leadership, and a migration plan for existing code. All pull requests and code reviews must verify compliance with these principles. Complexity must be justified with clear benefits outweighing maintenance costs.

**Version**: 1.1.0 | **Ratified**: 2026-01-15 | **Last Amended**: 2026-01-15

Also updated the template files to align with the new constitution requirements.

## Outcome

- âœ… Impact: Created new constitution for Phase II Full-Stack Web Application with 6 core principles
- ğŸ§ª Tests: none
- ğŸ“ Files: Updated constitution.md and aligned templates (plan, spec, tasks)
- ğŸ” Next prompts: none
- ğŸ§  Reflection: Constitution now properly defines the development methodology and tech stack requirements for the project

## Evaluation notes (flywheel)

- Failure modes observed: none
- Graders run and results (PASS/FAIL): none
- Prompt variant (if applicable): none
- Next experiment (smallest change to try): none